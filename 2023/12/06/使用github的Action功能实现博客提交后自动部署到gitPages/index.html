<!DOCTYPE html>
<html lang="zh">
    <head>
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0,  viewport-fit=cover" name="viewport" />
    <meta name="description" content="ä½¿ç”¨github Actionè‡ªåŠ¨åŒ–éƒ¨ç½²åšå®¢" />
    <meta name="hexo-theme-A4" content="v1.7.0" />
    <link rel="alternate icon" type="image/webp" href="/img/favicon.webp">
    <title>my blog</title>

    
        
            
<link rel="stylesheet" href="https://jsd.onmicrosoft.cn/npm/hexo-theme-a4@latest/source/css/reset.css">

            
<link rel="stylesheet" href="https://jsd.onmicrosoft.cn/npm/hexo-theme-a4@latest/source/css/markdown.css">

            
<link rel="stylesheet" href="https://jsd.onmicrosoft.cn/npm/hexo-theme-a4@latest/source/css/fonts.css">
 
            <!--æ³¨æ„ï¼šé¦–é¡µæ—¢ä¸æ˜¯postä¹Ÿä¸æ˜¯page-->
            
        
    
    
<link rel="stylesheet" href="/css/ui.css">
 
    
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 6.3.0"></head>
    
    <body>
        <div class="paper">
            
            
            
            
                <div class="shadow-drop-2-bottom paper-main">
                    
<div class="header">
    <div class="header-container">
        <img style="
        width: 56px;
        height: auto;" alt="^-^" cache-control="max-age=86400" class="header-img" src="/img/favicon.webp" width="10%"></img>
        <div class="header-content">
            <a class="logo" href="/">my blog</a> 
            <span class="description"></span> 
        </div>
        
    </div>
    
   
    <ul class="nav">
        
            
                <li><a href="/">é¦–é¡µ</a></li>
            
        
            
                <li><a href="/list/">æ–‡ç« </a></li>
            
        
            
                <li><a href="/tags/">æ ‡ç­¾</a></li>
            
        
            
                <li><a href="/categories/">åˆ†ç±»</a></li>
            
        
    </ul>
</div> 
        
                    
                    

                    
                    
                    
                    <!--è¯´æ˜æ˜¯æ–‡ç« posté¡µé¢-->
                    
                        <div class="post-main">

    
        <div class="post-main-title">
            ä½¿ç”¨github Actionè‡ªåŠ¨åŒ–éƒ¨ç½²åšå®¢
        </div>
      
    

    <div class="post-md">
        
            <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#%E4%BD%BF%E7%94%A8github-Action%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E5%8D%9A%E5%AE%A2"><span class="post-toc-text">ä½¿ç”¨github Actionè‡ªåŠ¨åŒ–éƒ¨ç½²åšå®¢</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#%E5%9C%A8repository%E4%B8%AD%E9%85%8D%E7%BD%AE%E5%B7%A5%E4%BD%9C%E6%B5%81"><span class="post-toc-text">åœ¨repositoryä¸­é…ç½®å·¥ä½œæµ</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#deploy-key%E7%9A%84%E8%8E%B7%E5%8F%96%E4%B8%8E%E9%85%8D%E7%BD%AE"><span class="post-toc-text">deploy_keyçš„è·å–ä¸é…ç½®</span></a></li></ol></li></ol>
        
        <h1 id="ä½¿ç”¨github-Actionè‡ªåŠ¨åŒ–éƒ¨ç½²åšå®¢"><a href="#ä½¿ç”¨github-Actionè‡ªåŠ¨åŒ–éƒ¨ç½²åšå®¢" class="headerlink" title="ä½¿ç”¨github Actionè‡ªåŠ¨åŒ–éƒ¨ç½²åšå®¢"></a>ä½¿ç”¨github Actionè‡ªåŠ¨åŒ–éƒ¨ç½²åšå®¢</h1><h2 id="åœ¨repositoryä¸­é…ç½®å·¥ä½œæµ"><a href="#åœ¨repositoryä¸­é…ç½®å·¥ä½œæµ" class="headerlink" title="åœ¨repositoryä¸­é…ç½®å·¥ä½œæµ"></a>åœ¨repositoryä¸­é…ç½®å·¥ä½œæµ</h2><ol>
<li><p><strong>åˆ›å»º<code>.github/workflows</code>ç›®å½•ï¼š</strong> åœ¨ä½ çš„ GitHub ä»“åº“ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º <code>.github/workflows</code> çš„ç›®å½•ã€‚GitHub ä¼šåœ¨è¯¥ç›®å½•ä¸­æŸ¥æ‰¾å·¥ä½œæµé…ç½®æ–‡ä»¶ã€‚</p>
</li>
<li><p><strong>æ·»åŠ å·¥ä½œæµé…ç½®æ–‡ä»¶ï¼š</strong> åœ¨ <code>.github/workflows</code> ç›®å½•ä¸­ï¼Œåˆ›å»ºä¸€ä¸ª YAML æ–‡ä»¶ï¼Œç”¨äºé…ç½®ä½ çš„å·¥ä½œæµã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªåä¸º <code>main.yml</code> çš„æ–‡ä»¶ã€‚</p>
</li>
<li><p><strong>ç¼–è¾‘å·¥ä½œæµé…ç½®ï¼š</strong> åœ¨å·¥ä½œæµé…ç½®æ–‡ä»¶ä¸­ï¼Œä½ éœ€è¦å®šä¹‰å·¥ä½œæµçš„åç§°ã€è§¦å‘æ¡ä»¶ä»¥åŠæ‰§è¡Œçš„ä»»åŠ¡ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼Œæ¼”ç¤ºå¦‚ä½•åœ¨æ¯æ¬¡æ¨é€åˆ°ä¸»åˆ†æ”¯æ—¶è¿è¡Œä¸€ä¸ªç®€å•çš„æ„å»ºå’Œæµ‹è¯•ä»»åŠ¡ï¼š</p>
<pre><code>name: CI

on:
  push:
    branches:
      - main

name: Pages

on:
  push:
    branches:
      - main # default branch

jobs:
  pages:
    runs-on: ubuntu-latest
    permissions:
      contents: write
    steps:
      - uses: actions/checkout@v2
      - name: Use Node.js 19.x
        uses: actions/setup-node@v2
        with:
          node-version: &quot;19&quot;
      - name: Cache NPM dependencies
        uses: actions/cache@v2
        with:
          path: node_modules
          key: $&#123;&#123; runner.OS &#125;&#125;-npm-cache
          restore-keys: |
            $&#123;&#123; runner.OS &#125;&#125;-npm-cache
      - name: Install Dependencies
        run: |
          npm remove package-lock.json
          npm install
      - name: Build
        run: npm run build
      - name: Deploy
        uses: peaceiris/actions-gh-pages@v3
        with:
          deploy_key: $&#123;&#123; secrets.DEPLOY_KEY &#125;&#125;
          external_repository: example/example.github.io
          publish_branch: main  # default: gh-pages
          publish_dir: ./public
</code></pre>
<p>è¿™ä¸ªä¾‹å­ä¸­ï¼Œå·¥ä½œæµçš„åç§°æ˜¯ â€œCIâ€ï¼Œè§¦å‘æ¡ä»¶æ˜¯åœ¨æ¯æ¬¡æ¨é€åˆ°ä¸»åˆ†æ”¯æ—¶è¿è¡Œã€‚å·¥ä½œæµåŒ…å«ä¸€ä¸ªä½œä¸šï¼ˆjobï¼‰ï¼Œè¯¥ä½œä¸šåœ¨ Ubuntu ç¯å¢ƒä¸­è¿è¡Œï¼Œå¹¶åŒ…å«ä¸€ç³»åˆ—æ­¥éª¤ï¼Œä¾‹å¦‚æ£€å‡ºä»£ç ã€è®¾ç½® Node.js ç­‰ã€‚</p>
</li>
<li><p><strong>æäº¤å¹¶æ¨é€åˆ° GitHubï¼š</strong> å°†å·¥ä½œæµé…ç½®æ–‡ä»¶æ·»åŠ åˆ°ä½ çš„ä»“åº“ï¼Œå¹¶å°†å…¶æäº¤å¹¶æ¨é€åˆ° GitHubã€‚GitHub å°†æ£€æµ‹åˆ°æ–°çš„å·¥ä½œæµé…ç½®æ–‡ä»¶ï¼Œå¹¶è‡ªåŠ¨å¼€å§‹æ‰§è¡Œè¯¥å·¥ä½œæµã€‚</p>
</li>
<li><p><strong>æŸ¥çœ‹å·¥ä½œæµæ‰§è¡Œç»“æœï¼š</strong> åœ¨ GitHub ä»“åº“çš„é¡µé¢ä¸Šï¼Œç‚¹å‡» â€œActionsâ€ æ ‡ç­¾ï¼Œä½ å°†çœ‹åˆ°å·¥ä½œæµçš„æ‰§è¡Œå†å²è®°å½•å’Œç»“æœã€‚ä½ å¯ä»¥æŸ¥çœ‹æ¯ä¸ªå·¥ä½œæµæ‰§è¡Œçš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬æ­¥éª¤çš„è¾“å‡ºå’Œä»»ä½•é”™è¯¯æ¶ˆæ¯ã€‚</p>
</li>
</ol>
<h2 id="deploy-keyçš„è·å–ä¸é…ç½®"><a href="#deploy-keyçš„è·å–ä¸é…ç½®" class="headerlink" title="deploy_keyçš„è·å–ä¸é…ç½®"></a>deploy_keyçš„è·å–ä¸é…ç½®</h2><ol>
<li><p><strong>ç”Ÿæˆ SSH å¯†é’¥å¯¹ï¼š</strong> åœ¨æœ¬åœ°æœºå™¨ä¸Šï¼Œä½ éœ€è¦ç”Ÿæˆä¸€ä¸ª SSH å¯†é’¥å¯¹ã€‚å¯ä»¥ä½¿ç”¨ <code>ssh-keygen</code> å‘½ä»¤æ‰§è¡Œæ­¤æ“ä½œã€‚åœ¨ç»ˆç«¯ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>
<pre><code class="bash">ssh-keygen -t rsa -b 4096 -C &quot;your_email@example.com&quot;
</code></pre>
<p> è¿™å°†ç”Ÿæˆä¸€ä¸ª RSA ç±»å‹çš„ SSH å¯†é’¥å¯¹ï¼Œå¹¶ä¸”ä¼šæç¤ºä½ é€‰æ‹©ä¿å­˜å¯†é’¥çš„æ–‡ä»¶è·¯å¾„ã€‚ä½ å¯ä»¥é€‰æ‹©é»˜è®¤è·¯å¾„ï¼ˆæŒ‰å›è½¦é”®ï¼‰ï¼Œä¹Ÿå¯ä»¥æŒ‡å®šè‡ªå®šä¹‰è·¯å¾„ã€‚</p>
</li>
<li><p><strong>æ·»åŠ  SSH å…¬é’¥åˆ° GitHubï¼š</strong> å°†ç”Ÿæˆçš„ SSH å…¬é’¥æ·»åŠ åˆ°ä½ çš„ GitHub å¸æˆ·ã€‚ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥è·å–å…¬é’¥å†…å®¹ï¼š</p>
<pre><code class="bash">cat ~/.ssh/id_rsa.pub
</code></pre>
<p> å¤åˆ¶å…¬é’¥å†…å®¹ï¼Œç„¶ååœ¨ GitHub ä¸Šçš„ Settings -&gt; SSH and GPG keys -&gt; New SSH key ä¸­æ·»åŠ ã€‚</p>
</li>
<li><p><strong>è®¾ç½® GitHub Secretsï¼š</strong> åœ¨ä½ çš„ GitHub ä»“åº“ä¸­ï¼Œè½¬åˆ° â€œSettingsâ€ -&gt; â€œSecretsâ€ -&gt; â€œNew repository secretâ€ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªåä¸º <code>DEPLOY_KEY</code> çš„ secretï¼Œå¹¶å°†ç§é’¥ç²˜è´´åˆ°è¯¥ secret çš„å€¼ä¸­ã€‚</p>
<ul>
<li>åç§°ï¼š<code>DEPLOY_KEY</code></li>
<li>å€¼ï¼šç²˜è´´ç”Ÿæˆçš„ç§é’¥å†…å®¹</li>
</ul>
<p>è¿™ä¸ª secret å°†åœ¨ä½ çš„ GitHub Actions é…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨ã€‚</p>
</li>
<li><p><strong>åœ¨ GitHub Actions ä¸­ä½¿ç”¨ <code>deploy_key</code>ï¼š</strong> åœ¨ä½ çš„ GitHub Actions é…ç½®æ–‡ä»¶ä¸­ï¼Œç¡®ä¿ä½ ä½¿ç”¨äº†æ­£ç¡®çš„ secret åç§°ï¼Œå¹¶å°†å…¶ä¼ é€’ç»™ <code>deploy_key</code> å‚æ•°ã€‚ä¾‹å¦‚ï¼š</p>
<pre><code class="yaml">- name: Deploy
  uses: peaceiris/actions-gh-pages@v3
  with:
    deploy_key: $&#123;&#123; secrets.DEPLOY_KEY &#125;&#125;
    # å…¶ä»–å‚æ•°...
</code></pre>
</li>
</ol>
<p>è¯·ç¡®ä¿ä¿æŠ¤å¥½ç§é’¥ï¼Œä¸è¦å°†å…¶æ³„éœ²åˆ°å…¬å…±åœºåˆã€‚é€šè¿‡ GitHub Secrets å­˜å‚¨ç§é’¥æ˜¯ä¸ºäº†åœ¨ GitHub Actions ä¸­å®‰å…¨åœ°ä½¿ç”¨å®ƒã€‚</p>

    </div>

    <div class="post-meta">
        <i>
        
            <span>2023-12-06</span>
            
                <span>è¯¥ç¯‡æ–‡ç« è¢« maskcat</span>
            
            
                <span>æ‰“ä¸Šæ ‡ç­¾:
                    
                    
                        <a href='/tags/blog-github/'>
                            blog github
                        </a>
                    
                </span>
             
             
                <span>å½’ä¸ºåˆ†ç±»:
                    
                    
                        <a href='/categories/%E9%85%8D%E7%BD%AE/'>
                            é…ç½®
                        </a>
                    
                </span>
            
        
        </i>
    </div>
    
        

     
</div>



                    
                    
                    <div class="footer">
    
        <span> 
            Â© 1949-2023 China 

            
                

            
        </span>
    
</div>
<!--è¿™æ˜¯æŒ‡ä¸€æ¡çº¿å¾€ä¸‹çš„å†…å®¹-->
<div class="footer-last">
    
            <span>ğŸŒŠçœ‹è¿‡å¤§æµ·çš„äººä¸ä¼šå¿˜è®°æµ·çš„å¹¿é˜”ğŸŒŠ</span>
            
                <span class="footer-last-span-right"><i>æœ¬ç«™ç”±<a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/index.html">Hexo</a>é©±åŠ¨ï½œä½¿ç”¨<a target="_blank" rel="noopener" href="https://github.com/HiNinoJay/hexo-theme-A4">Hexo-theme-A4</a>ä¸»é¢˜</i></span>
            
    
</div>


    
        
<link rel="stylesheet" href="https://jsd.onmicrosoft.cn/npm/hexo-theme-a4@latest/source/css/a11y-dark.min.css">

        
<script src="https://jsd.onmicrosoft.cn/npm/hexo-theme-a4@latest/source/js/highlight.min.js"></script>

        
<script src="https://jsd.onmicrosoft.cn/npm/hexo-theme-a4@latest/source/js/highlightjs-line-numbers.js"></script>

    


<script>
    hljs.initHighlightingOnLoad();
    hljs.initLineNumbersOnLoad();
</script>
                </div>
            
    </body>
</html>